<%- include('../partials/header')%>
    <%- include('../partials/navbar')%>
        <%- include('../partials/sidebar')%>
            <style>
                .profile_form {
                    width: 50%;
                    border-radius: 4px;
                    padding: 20px 20px;
                }

                label.inpt_file input {
                    display: none;
                }

                label.inpt_file img {
                    border-radius: 130px;
                    border: 1px solid #ddd;
                }

                @media (max-width:991px) {
                    .profile_form {
                        width: 100%;
                    }
                }
            </style>

            <div class="content">
                <div class="panel panel-flat">
                    <div class="panel-body">
                        <h2 class="text-bold"> Your Profile</h2>
                        <div class="profile_form">
                            <form id="basic-form" action="/update" method="post" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label class="control-label col-lg-3">Profile Image</label>
                                    <label class="inpt_file"><input accept="image/*" name="profileimage" type='file'
                                            id="imgInp" />

                                        <img id="blah" src=" images/<%=data.profileimage %>"
                                            alt="<%=data.profileimage %>" width="150" height="150" />
                                    </label>
                                </div>
                                <div class="md-3">
                                    <label for="" class="form-label"> Name</label>
                                    <input type="text" name="name" value="<%=data.name%>" class="form-control">
                                </div>
                                <div class="md-3">
                                    <label for="" class="form-label"> Email</label>
                                    <input type="text" name="email" value="<%=data.email%>" class="form-control">
                                </div>
                                <div class="text-right">
                                    <button type="submit" class="btn btn-primary">submit</button>
                                    <div class="spinner-border  m-0 text-success" role="status">
                                        <span class="sr-only"></span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                imgInp.onchange = evt => {
                    const [file] = imgInp.files
                    if (file) {
                        blah.src = URL.createObjectURL(file)
                    }
                }
                imgI.onchange = evt => {
                    const [file] = imgI.files
                    if (file) {
                        bl.src = URL.createObjectURL(file)
                    }
                }
            </script>
            <script>
                $(document).ready(function () {
                    $("#basic-form").validate({
                        rules: {
                            name: {
                                required: true,
                            },
                            email: {
                                required: true,
                            },
                        },
                        messages: {
                            name: {
                                required: "Enter Your Name"
                            },
                            email: {
                                required: "Please fill Your Email"
                            },
                            highlight: function (element) {
                                $(element).parent().addClass('error')
                            },
                        }
                    });
                });
            </script>